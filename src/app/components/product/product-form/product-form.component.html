<div class="container mt-4">
  <h2>{{ isEdit ? 'Editar Producto' : 'Nuevo Producto' }}</h2>
  <form [formGroup]="productForm" (ngSubmit)="onSubmit()" enctype="multipart/form-data">
    <div class="row">
      <!-- Código -->
      <div class="col-md-6 mb-3">
        <label for="cod">Código:</label>
        <input type="text" id="cod" class="form-control" formControlName="cod" />
      </div>

      <!-- Nombre -->
      <div class="col-md-6 mb-3">
        <label for="name">Nombre:</label>
        <input type="text" id="name" class="form-control" formControlName="name" />
      </div>

      <!-- Categoría -->
      <div class="col-md-6 mb-3">
        <label for="categoryProductId">Categoría:</label>
        <select formControlName="categoryProductId" class="form-control">
          <option value="" disabled selected>Seleccione una categoría</option>
          <option *ngFor="let categoria of categorias" [value]="categoria.id">{{ categoria.name }}</option>
        </select>
      </div>

      <!-- Proveedor -->
      <div class="col-md-6 mb-3">
        <label for="supplierProductId">Proveedor:</label>
        <select formControlName="supplierProductId" class="form-control">
          <option value="" disabled selected>Seleccione un proveedor</option>
          <option *ngFor="let proveedor of proveedores" [value]="proveedor.id">{{ proveedor.name }}</option>
        </select>
      </div>

      <!-- Marca -->
      <div class="col-md-6 mb-3">
        <label for="brand">Marca:</label>
        <input type="text" id="brand" class="form-control" formControlName="brand" />
      </div>

      <!-- Modelo -->
      <div class="col-md-6 mb-3">
        <label for="model">Modelo:</label>
        <input type="text" id="model" class="form-control" formControlName="model" />
      </div>

      <!-- Año -->
      <div class="col-md-6 mb-3">
        <label for="year">Año:</label>
        <input type="text" id="year" class="form-control" formControlName="year" />
      </div>

      <!-- Precio de Costo -->
      <div class="col-md-6 mb-3">
        <label for="costPrice">Precio de Costo:</label>
        <input type="number" id="costPrice" class="form-control" formControlName="costPrice" />
      </div>

      <!-- Precio al Distribuidor -->
      <div class="col-md-6 mb-3">
        <label for="dealerPrice">Precio Dealer:</label>
        <input type="number" id="dealerPrice" class="form-control" formControlName="dealerPrice" />
      </div>

      <!-- Precio de Venta -->
      <div class="col-md-6 mb-3">
        <label for="salePrice">Precio de Venta:</label>
        <input type="number" id="salePrice" class="form-control" formControlName="salePrice" />
      </div>

      <!-- Sede -->
      <div class="col-md-6 mb-3">
        <label for="sede">Sede:</label>
        <select id="sede" class="form-control" formControlName="sede">
          <option value="">Seleccione una sede</option>
          <option *ngFor="let sede of sedes" [value]="sede">{{ sede }}</option>
        </select>
      </div>

      <!-- Descripción -->
      <div class="col-md-12 mb-3">
        <label for="description">Descripción:</label>
        <textarea id="description" class="form-control" rows="3" formControlName="description"></textarea>
      </div>

      <!-- Imagen -->
       <div *ngIf="imagePreviewUrl" class="mt-2">
          <p>Imagen actual:</p>
          <img [src]="imagePreviewUrl" alt="Imagen del producto" width="150" class="img-thumbnail">
        </div>
        <div class="col-md-6 mb-3">
          <label for="imageUrl">Imagen:</label>
          <input type="file" id="imageUrl" class="form-control"  (change)="onFileSelected($event)" />
        </div>
    </div>

    <button type="submit" class="btn btn-primary me-2">
      {{ productForm.get('id')?.value ? 'Actualizar' : 'Guardar' }}
    </button>
    <button type="button" class="btn btn-secondary" routerLink="/productos">Cancelar</button>
  </form>
</div>
